WindowManager:
    VelocityTriangles:
    NewWindow:

<P>:

<Label>
    color: [0,0,0,1]
    id: kappa

<TextInput>
    #size_hint: 1,0.6
    spacing: 5
    write_tab: False
    input_filter:'float'
<ToggleButton>
    size_hint: 0.5,1

<VelocityTriangles>:
    name: "Main"

    p:p
    f:f
    rn:rn
    a1:a1
    a2:a2
    a3:a3
    b1:b1
    b2:b2
    b3:b3

    
    


    GridLayout:
        rows:2
        size: root.width,root.height

        ######  App Title
        BoxLayout:
            size_hint_y:0.08
            canvas:
                Color:
                    rgba: 0.066,0.392,0.505,0.768
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                text: "One Stage Velocity Analysis "
                bold: True
                font_size:root.fontsize3(self.text)


        ###### Overall Grid after title
        GridLayout:
            rows: 4
            size_hint_y:0.92
############ proto part tou grid. Switch button Area
            BoxLayout:
                padding: 10
                size_hint_y: 0.1
                canvas:
                    Color:
                        rgba: 0.333,0.596,0.635,0.9
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text:'Repeating Stage'
                    font_size: root.fontsize(self.text)
                ToggleButton:
                    text: " "
                    id: dion
                    group: "a"
                    on_press:
                ToggleButton:
                    text: " "
                    id: faulty
                    group: "a"
                    on_press:
                Label:
                    text:'   Non Repeating Stage'
                    font_size: root.fontsize(self.text)
#                Label:
#                    text: 'Choose your stage state'
#                Switch:
#                    id: switch
#                    source: 'account-login-3x.png'
#                Label:
#                    text: 'Repeating Stage' if switch.active else 'Non Repeating Stage'

############Keno anamesa sto switch kai ta inputs
            BoxLayout:
                size_hint_y: 0.01
                canvas:
                    Color:
                        rgba:0.6862,0.9333,0.9333,0.737
                    Rectangle:
                        pos: self.pos
                        size: self.size

########### Grid me ta textInputs
            GridLayout:
                size_hint_y: 0.45
                cols: 3
                canvas:
                    Color:
                        rgba: 0.6862,0.9333,0.9333,0.737

                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Loading Coefficient \u03C8 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    id: p
                    multiline: False
                    write_tab: False
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ - ] "
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Flow Coefficient \u03C6 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    id: f
                    multiline: False
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ - ] "
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Reaction Coefficient Rn : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    multiline: False
                    id: rn
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ - ] "
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Inlet absolute angle \u03B11 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    multiline: False
                    id: a1
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ \u00B0 ]"
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Outlet absolute angle \u03B12 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    multiline: False
                    id: a2
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ \u00B0 ]"
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Inlet absolute angle \u03B13 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    multiline: False
                    id: a3
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ \u00B0 ]"
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Inlet relative angle \u03B21 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    multiline: False
                    id: b1
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ \u00B0 ]"
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Outlet relative angle \u03B22 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    multiline: False
                    id: b2
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ \u00B0 ]"
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

                Label:
                    font_size:root.fontsize2(self.text)
                    text:"Inlet relative angle \u03B23 : "
                    text_size: self.size
                    halign: 'right'
                    valign: 'middle'
                TextInput:
                    multiline: False
                    id: b3
                Label:
                    font_size:root.fontsize2(self.text)
                    text: " [ \u00B0 ]"
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'

            #Deytero Grid
            GridLayout:
                size_hint_y: 0.45
                rows:5
                #Proto Box
                BoxLayout:
                    size_hint_y: 0.25
                    padding:5
                    canvas:
                        Color:
                            rgba: 0.6862,0.9333,0.9333,0.737
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    Label:
                        size_hint_x:0.325
                        text: ""
                    Button:
                        id:oti
                        size_hint_x:0.333
                        text: "Velocity Analysis"
                        font_size:root.fontsize2(self.text)
                        color: [1,1,1,1]
                        on_release:
                            root.systemsolver()
                            if root.p.text.replace(".","",1).isdigit()== True and root.f.text.replace(".","",1).isdigit() == True and root.rn.text.replace(".","",1).isdigit() == True:\
                            app.root.current = "new";\
                            root.manager.transition.direction = "left";\



                    Label:
                        size_hint_x:0.325
                        text: ""

                BoxLayout:
                    size_hint_y: 0.39
                    padding: 11
                    canvas:
                        Color:
                            rgba: 0.333,0.596,0.635,0.9
                        Rectangle:
                            pos: self.pos
                            size: self.size

                    Label:
                        font_size: root.fontsize(self.text)
                        text:"Parallel Annulus"
                    ToggleButton:
                        text: " "
                        id: dion
                        group: "b"
                        on_press:
                    ToggleButton:
                        text: " "
                        id: faulty
                        group: "b"
                        on_press:
                    Label:
                        font_size: root.fontsize(self.text)
                        text:"    Non Parallel Annulus"

                BoxLayout:
                    size_hint_y: 0.03
                    padding:5
                    canvas:
                        Color:
                            rgba: 0.6862,0.9333,0.9333,0.737
                        Rectangle:
                            pos: self.pos
                            size: self.size

                GridLayout:
                    size_hint_y: 0.485
                    cols: 3
                    canvas:
                        Color:
                            rgba: 0.6862,0.9333,0.9333,0.737

                        Rectangle:
                            pos: self.pos
                            size: self.size
                    Label:
                        font_size:root.fontsize2(self.text)
                        text:"Tip Diameter : "
                        text_size: self.size
                        halign: 'right'
                        valign: 'middle'
                    TextInput:
                        multiline: False

                    Label:
                        font_size:root.fontsize2(self.text)
                        text: " [ m ]"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Label:
                        font_size:root.fontsize2(self.text)
                        text:" Hub to Tip Ratio : "
                        text_size: self.size
                        halign: 'right'
                        valign: 'middle'
                    TextInput:
                        multiline: False

                    Label:
                        font_size:root.fontsize2(self.text)
                        text: " [ - ]"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Label:
                        font_size:root.fontsize2(self.text)
                        text:" Rotational Speed : "
                        text_size: self.size
                        halign: 'right'
                        valign: 'middle'
                    TextInput:
                        multiline: False

                    Label:
                        font_size:root.fontsize2(self.text)
                        text: " [ rpm ]"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'

                BoxLayout:
                    size_hint_y: 0.5
                    padding:5
                    canvas:
                        Color:
                            rgba: 0.6862,0.9333,0.9333,0.737
                        Rectangle:
                            pos: self.pos
                            size: self.size

<NewWindow>:
    name: "new"
    GridLayout:
        rows: 2
        GridLayout:
            cols:2
            size_hint_y:0.7

            GridLayout:
                rows:3
                size_hint_x:0.5

                BoxLayout:
                    size_hint_y:0.08
                    spacing:10

                    canvas:
                        Color:
                            rgba: 0.066,0.392,0.505,0.768
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba:0,0,0,1
                        Line:
                            width: 3.
                            rectangle: (self.x, self.y, self.width, self.height)
                    Label:

                        text:'Velocity analysis Results'
                        font_size: root.fontsize3(self.text)
                        bold:True
                        text_size: self.size
                        halign: 'center'
                        valign: 'middle'

                GridLayout:
                    cols:2
                    size_hint_y:0.65
                    canvas:
                        Color:
                            rgba: 0.6862,0.9333,0.9333,0.737
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba:0,0,0,1
                        Line:
                            width: 3.
                            rectangle: (self.x, self.y, self.width, self.height)


                    GridLayout:
                        rows:9
                        size_hint_x:0.7

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Loading Coefficient \u03C8 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Flow Coefficient \u03C6 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Reaction Coefficient Rn : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Inlet absolute angle \u03B11 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Outlet absolute angle \u03B12 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Inlet absolute angle \u03B13 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Inlet relative angle \u03B21 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Outlet relative angle \u03B22 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'

                        Label:
                            font_size:root.fontsize2(self.text)
                            text:"Inlet relative angle \u03B13 : "
                            text_size: self.size
                            halign: 'right'
                            valign: 'middle'


                    GridLayout:
                        rows:9
                        size_hint_x:0.3

                        Label:
                            text: root.pText
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            text: root.fText
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            text: root.rnText
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            text: root.a1Text
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            text: root.a2Text
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            #text: root.a3Text
                            text:'------'
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            text: root.b1Text
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            text: root.b2Text
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'
                        Label:
                            #text: root.b3Text
                            text:'------'
                            font_size:root.fontsize2(self.text)
                            text_size: self.size
                            halign: 'left'
                            valign: 'middle'

                BoxLayout:
                    size_hint_y:0.3
                    canvas:
                        Color:
                            rgba: 0.6862,0.9333,0.9333,0.737
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        

            BoxLayout:
                size_hint:0.5,0.5
                canvas:
                    Color:
                        rgba: 0.6862,0.9333,0.9333,0.737
                    Rectangle:
                        pos: self.pos
                        size: self.size


        GridLayout:
            cols:2
            size_hint_y:0.3
            canvas:
                Color:
                    rgba: 0.6862,0.9333,0.9333,0.737
                Rectangle:
                    pos: self.pos
                    size: self.size

            BoxLayout:
                padding: 15
                spacing: 20
                size_hint_x: 0.3
                canvas:
                    Color:
                        rgba:0,0,0,1
                    Line:
                        width:1.5
                        points: (125,80,275,80) ###BASELINE U
                    Line:
                        width:1.5
                        points: (125,80,275-150*float(root.rnText)-150*float(root.pText)/2,80+150*float(root.fText))
                    Line:
                        width:1.5
                        points: (275-150*float(root.rnText)-150*float(root.pText)/2,80+150*float(root.fText),275,80)
                    Line:
                        width:1.5
                        points: (275,80,275-150*float(root.rnText)+150*float(root.pText)/2,80+150*float(root.fText))
                    Line:
                        width:1.5
                        points: (125,80,275-150*float(root.rnText)+150*float(root.pText)/2,80+150*float(root.fText))
                    Color:
                        rgba: 0.6862,0.9333,0.9333,0.737
                Button:
                    size_hint_y:0.25
                    text:"Back"
                    on_release:
                        root.manager.current = "Main"
                        root.manager.transition.direction = "right"

            BoxLayout:
                size_hint_x:0.7
                

                    

